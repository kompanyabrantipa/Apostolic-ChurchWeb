# =============================================================================
# APOSTOLIC CHURCH INTERNATIONAL - PRODUCTION MONGODB CONFIGURATION
# =============================================================================
# Production-ready configuration for church website backend
# Copy this file to .env and update values for your environment

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Production MongoDB Atlas Configuration (Recommended)
MONGODB_URI=mongodb+srv://church_admin:SECURE_PASSWORD@apostolic-cluster.mongodb.net/apostolic_church?retryWrites=true&w=majority
MONGODB_USERNAME=church_admin
MONGODB_PASSWORD=SECURE_PASSWORD

# MongoDB Connection Pool Settings
MONGODB_MAX_POOL_SIZE=20
MONGODB_SERVER_SELECTION_TIMEOUT_MS=5000
MONGODB_SOCKET_TIMEOUT_MS=45000
MONGODB_CONNECT_TIMEOUT_MS=10000
MONGODB_MAX_IDLE_TIME_MS=30000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Configuration (CHANGE IN PRODUCTION!)
JWT_SECRET=CHANGE_THIS_TO_A_VERY_SECURE_RANDOM_STRING_AT_LEAST_64_CHARACTERS_LONG
JWT_EXPIRES_IN=8h

# Admin User Configuration (CHANGE IN PRODUCTION!)
ADMIN_USERNAME=church_admin
ADMIN_PASSWORD=CHANGE_THIS_TO_A_VERY_SECURE_PASSWORD

# Session Configuration
SESSION_SECRET=CHANGE_THIS_TO_A_VERY_SECURE_SESSION_SECRET_64_CHARACTERS_LONG
COOKIE_SECURE=true
COOKIE_HTTP_ONLY=true
COOKIE_SAME_SITE=strict

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Production Server Settings
NODE_ENV=production
PORT=443
HTTPS_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/apostolicchurch.crt
SSL_KEY_PATH=/etc/ssl/private/apostolicchurch.key

# =============================================================================
# CORS & SECURITY HEADERS
# =============================================================================

# Production CORS Configuration
FRONTEND_URL=https://apostolicchurch.org
ALLOWED_ORIGINS=https://apostolicchurch.org,https://www.apostolicchurch.org

# Security Headers
HELMET_ENABLED=true
CONTENT_SECURITY_POLICY=true
HSTS_MAX_AGE=31536000
REFERRER_POLICY=strict-origin-when-cross-origin

# =============================================================================
# RATE LIMITING & PERFORMANCE
# =============================================================================

# Rate Limiting (more restrictive for production)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=50
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# API Rate Limiting
API_RATE_LIMIT_WINDOW_MS=300000
API_RATE_LIMIT_MAX_REQUESTS=25

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================

# File Upload Settings
UPLOAD_DIR=/var/www/apostolic-church/uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,webp,pdf
MAX_FILES_PER_REQUEST=3

# Cloud Storage (AWS S3)
CLOUD_STORAGE_ENABLED=true
AWS_S3_BUCKET=apostolic-church-media
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_REGION=us-east-1

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Logging Configuration
LOG_LEVEL=warn
LOG_FILE=/var/log/apostolic-church/app.log
LOG_MAX_SIZE=50m
LOG_MAX_FILES=10

# Error Reporting
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
ENABLE_ERROR_REPORTING=true

# Performance Monitoring
ENABLE_QUERY_LOGGING=true
SLOW_QUERY_THRESHOLD_MS=500

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@apostolicchurch.org
SMTP_PASS=your_email_app_password
FROM_EMAIL=noreply@apostolicchurch.org
FROM_NAME=Apostolic Church International

# =============================================================================
# BACKUP & MAINTENANCE
# =============================================================================

# Automated Backup Settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=90
BACKUP_STORAGE_PATH=/backups/mongodb
BACKUP_S3_BUCKET=apostolic-church-backups

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=Website is temporarily under maintenance for updates. Please check back in a few minutes.

# =============================================================================
# ANALYTICS & INTEGRATIONS
# =============================================================================

# Google Analytics
GA_TRACKING_ID=UA-XXXXXXXXX-X
GA_ENABLED=true

# Church Management Integration
CHURCH_MANAGEMENT_API_KEY=your_church_management_api_key
CHURCH_MANAGEMENT_WEBHOOK_SECRET=your_webhook_secret

# Social Media Integration
FACEBOOK_PAGE_ID=your_facebook_page_id
YOUTUBE_CHANNEL_ID=your_youtube_channel_id

# =============================================================================
# PRODUCTION OPTIMIZATIONS
# =============================================================================

# Caching
REDIS_URL=redis://localhost:6379
CACHE_TTL=3600
ENABLE_RESPONSE_CACHING=true

# Compression
ENABLE_GZIP=true
COMPRESSION_LEVEL=6

# Static File Serving
SERVE_STATIC_FILES=false
CDN_URL=https://cdn.apostolicchurch.org

# Database Optimization
ENABLE_QUERY_OPTIMIZATION=true
CONNECTION_POOL_MIN=5
CONNECTION_POOL_MAX=20

# =============================================================================
# SECURITY HARDENING
# =============================================================================

# IP Whitelisting (optional)
# ADMIN_IP_WHITELIST=192.168.1.100,10.0.0.50

# API Key Authentication (for external integrations)
API_KEY_REQUIRED=true
VALID_API_KEYS=key1_for_mobile_app,key2_for_website_integration

# Brute Force Protection
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=30

# Content Security
ENABLE_XSS_PROTECTION=true
ENABLE_CONTENT_TYPE_NOSNIFF=true
ENABLE_FRAME_OPTIONS=true

# =============================================================================
# MONITORING & HEALTH CHECKS
# =============================================================================

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Uptime Monitoring
UPTIME_ROBOT_API_KEY=your_uptime_robot_api_key
PINGDOM_API_KEY=your_pingdom_api_key

# Performance Metrics
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key
DATADOG_API_KEY=your_datadog_api_key

# =============================================================================
# DEVELOPMENT SETTINGS (DISABLE IN PRODUCTION)
# =============================================================================

# Development Tools (MUST BE FALSE IN PRODUCTION)
DEBUG_MODE=false
ENABLE_API_DOCS=false
ENABLE_GRAPHQL_PLAYGROUND=false
WATCH_FILES=false
RELOAD_ON_CHANGE=false
